<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ArtMera - Generator Mărțișor Digital</title>
    <style>
        :root {
            --wood-dark: #5d4037;
            --wood-light: #efebe9;
            --martisor-red: #d32f2f;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--wood-light);
            color: var(--wood-dark);
            display: flex;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            max-width: 500px;
            width: 100%;
            border: 2px solid var(--wood-dark);
        }

        h1 { text-align: center; font-size: 1.5rem; margin-bottom: 25px; }

        .language-picker {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
        }

        button.lang-btn {
            padding: 8px 15px;
            border: 1px solid var(--wood-dark);
            background: white;
            cursor: pointer;
            border-radius: 5px;
            transition: 0.3s;
        }

        button.lang-btn.active {
            background: var(--wood-dark);
            color: white;
        }

        .section { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: bold; }

        input[type="file"], select, textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
        }

        textarea { height: 80px; resize: none; }

        .btn-generate {
            background: var(--martisor-red);
            color: white;
            border: none;
            width: 100%;
            padding: 15px;
            font-size: 1.1rem;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
            font-weight: bold;
        }

        .btn-download {
            background: #4caf50;
            color: white;
            border: none;
            width: 100%;
            padding: 12px;
            margin-top: 10px;
            border-radius: 5px;
            cursor: pointer;
            display: none; /* Apare doar după generare */
        }

        #preview-container {
            margin-top: 20px;
            text-align: center;
        }

        canvas {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            display: none;
        }
    </style>
</head>
<body>

<div class="container">
    <h1 id="main-title">Generator Mărțișor Digital</h1>

    <div class="language-picker">
        <button class="lang-btn active" onclick="setLanguage('ro')">Română</button>
        <button class="lang-btn" onclick="setLanguage('en')">English</button>
        <button class="lang-btn" onclick="setLanguage('es')">Español</button>
    </div>

    <div class="section">
        <label id="label-upload">Încarcă poza ta (Upload Your Photo):</label>
        <input type="file" id="photoInput" accept="image/*">
    </div>

    <div class="section">
        <label id="label-message">Alege mesajul de primăvară:</label>
        <select id="messageSelect" onchange="syncCustomText()">
            </select>
        <label id="label-custom" style="margin-top:15px;">Sau scrie mesajul tău scurt:</label>
        <textarea id="customText" placeholder="Scrie aici..."></textarea>
    </div>

    <button class="btn-generate" onclick="generateMartisor()" id="btn-gen">Generate My Mărțișor!</button>
    
    <div id="preview-container">
        <canvas id="martisorCanvas" width="800" height="800"></canvas>
        <button class="btn-download" id="btn-down" onclick="downloadImage()">Download Your Mărțișor!</button>
    </div>
</div>

<script>
    const translations = {
        ro: {
            title: "Generator Mărțișor Digital",
            upload: "Încarcă poza ta:",
            chooseMsg: "Alege mesajul de primăvară:",
            custom: "Sau scrie mesajul tău scurt:",
            btnGen: "Generează Mărțișorul!",
            btnDown: "Descarcă Mărțișorul!",
            messages: [
                "O primăvară plină de bucurii și noroc!",
                "Să-ți fie sufletul plin de lumină!",
                "Un gând bun de Mărțișor!"
            ]
        },
        en: {
            title: "Digital Mărțișor Generator",
            upload: "Upload Your Photo:",
            chooseMsg: "Choose Your Spring Message:",
            custom: "Or write your own short message:",
            btnGen: "Generate My Mărțișor!",
            btnDown: "Download Your Mărțișor!",
            messages: [
                "Happy Spring filled with joy and luck!",
                "May your spirit bloom bright!",
                "A Mărțișor with a warm wish!"
            ]
        },
        es: {
            title: "Generador de Mărțișor Digital",
            upload: "Sube tu foto:",
            chooseMsg: "Elige tu mensaje de primavera:",
            custom: "O escribe tu propio mensaje corto:",
            btnGen: "¡Generar mi Mărțișor!",
            btnDown: "¡Descargar mi Mărțișor!",
            messages: [
                "¡Feliz primavera llena de alegría y suerte!",
                "¡Que tu espíritu florezca brillante!",
                "¡Un Mărțișor con un deseo cálido!"
            ]
        }
    };

    let currentLang = 'ro';

    function setLanguage(lang) {
        currentLang = lang;
        
        // Update active button
        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.classList.remove('active');
            if(btn.innerText.toLowerCase().includes(lang === 'ro' ? 'rom' : lang === 'en' ? 'eng' : 'esp')) {
                btn.classList.add('active');
            }
        });

        // Update UI Text
        document.getElementById('main-title').innerText = translations[lang].title;
        document.getElementById('label-upload').innerText = translations[lang].upload;
        document.getElementById('label-message').innerText = translations[lang].chooseMsg;
        document.getElementById('label-custom').innerText = translations[lang].custom;
        document.getElementById('btn-gen').innerText = translations[lang].btnGen;
        document.getElementById('btn-down').innerText = translations[lang].btnDown;

        // Update Dropdown Messages
        const select = document.getElementById('messageSelect');
        select.innerHTML = '';
        translations[lang].messages.forEach(msg => {
            let opt = document.createElement('option');
            opt.value = msg;
            opt.innerHTML = msg;
            select.appendChild(opt);
        });
    }

    function syncCustomText() {
        document.getElementById('customText').value = document.getElementById('messageSelect').value;
    }

    // Inițializare
    setLanguage('ro');

    function generateMartisor() {
        const canvas = document.getElementById('martisorCanvas');
        const ctx = canvas.getContext('2d');
        const photoInput = document.getElementById('photoInput');
        
        // Aici ar veni logica de desenare pe Canvas (Fundal Lemn, Hornar Gravat, Ghiocel, Cercul pozei)
        // Pentru acest demo, afișăm canvas-ul și butonul de download
        canvas.style.display = 'block';
        document.getElementById('btn-down').style.display = 'block';
        
        alert("Imaginea se generează pe baza texturii de lemn de tei și a pozei încărcate...");
    }

    function downloadImage() {
        const canvas = document.getElementById('martisorCanvas');
        const link = document.createElement('a');
        link.download = 'martisor-artmera.png';
        link.href = canvas.toDataURL();
        link.click();
    }
</script>

</body>
</html>
